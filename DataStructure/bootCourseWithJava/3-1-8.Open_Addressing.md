## 충돌 해결

### 들어가기 전에
해시 충돌은 어떻게 해결할 수 있을까? 해결 방법인 선형 조사법, 2차식 조사법, 이중 해싱에 대해 살펴보도록 하자.

### 학습 목표
해시 충돌의 해결 방법을 설명할 수 있다.

### 핵심 단어
- 해시 충돌

---
#### 해시 충돌을 해결하는 방법
해시 충돌을 해결하기 위한 한 가지 방법은 다음 칸에 값을 넣는 것이다. 이 방법을 사용할때는 값을 불러올 때 위치가 바뀌었다는 사실을 알아야 한다.  
데이터를 찾을 때 해당하는 위치가 비어있지 않은데, 찾고자 하는 값이 아닐 수 있다. 그럼 다음, 또 다음, 찾고자 하는 값을 찾을 때까지 뒤로 가야한다.  
이런 방법을 선형 조사법이라고 한다. 빈 공간을  찾을 때까지 자료구조를 살펴보는 것이다.  
자료구조가 차면서 추가된 객체를 찾기 위해 더 많은 칸을 살펴봐야한다. 마찬가지로 요소를 제거할 때 단순히 요소를 제거하고 null로 설정하면 안된다. 그렇게 되면 나중에 찾고자 하는 요소가 null 뒤에 있다면 그 값을 찾지 못하게 된다. 그래서 단순히 제거하지 않고 표시를 해야한다.  
선형 조사법은 복잡하지 않다. 해시값에서 시작해 null에 도착할 때까지 1씩 더하고, null에 도착하면 그 위치에 저장하면 된다. 제거할 때는 뒤에 값이 있다는 사실을 고려해야하기 때문에 조금 더 복잡하다.  
선형 조사법을 하게되면 관계가 있든 없든 데이터가 뭉치게 된다. 그리고 순식간에 비 효율적인 방법이 되버린다. 이러한 문제점을 해결하기 위해 2차식 조사법을 사용할 수 있다.  

2차식 조사법이란 해시값에 이미 데이터가 있다면 그 값의 제곱만큼 더해서 위치를 지정하는 것이다. 이렇게 하는 이유는 처음에는 바로 옆칸에 추가하지만, 다음에는 더 먼 위치에 저장하려고 하는 것이다.  

두가지 방법 다 값을 더하면서 테이블의 크기보다 커질 수 있다는 사실을 알아야한다. 테이블의 끝을 넘어가면 % 연산을 해서 다시 테이블의 범위 안에 들어오게 해야한다.  

이중 해싱이라는 다른 방법도 있다. 이 방법은 hashCode 함수가 한개가 아닌 두개가 있는 것이다. 두번째 함수는 첫번째 함수와 달라야 하고, 0을 반환하면 안된다.  
처음 hashCode로 반환한 위치에 값이 있다면 첫번째 값과 두번째 hashCode로 반환한 값을 더한다. 그래서 0을 반환하면 안된다. 두 값의 합은 이 테이블 내의 위치가 된다.  
이중 해싱은 선형 또는 2차식 조사법과 다르게 아예 다른 해시 함수를 사용할 수 있기 때문에 데이터를 더 골고루 넣을 수 있게 된다.  
그러나 이중 해싱의 단점은 자료구조에 들어가는 데이터는 두개의 다른 해시 함수가 필요하다는 것이다.  

이중 해싱은 선형 또는 2차식 조사법의 대안이 될 수 잇으나 공통적으로 테이블이 빠르게 한다는 문제점이 있다.  
선형 조사법과 2차 조사법은 적재율이 증가하면서 테이블의 크기를 바꿔줘야 한다. 주로 적재율이 0.6일 때 쯤 바꿔준다. 


##### 정리
1. 선형 조사법(linear probing)
   채우려는 공간이 이미 차 있다면, 비어있는 칸을 찾을 때까지 다음 칸을 확인하는 방법이다. 비어있는 칸을 찾아 그 곳에 채운 후 위치가 바뀌었다는 사실을 알려야 한다.

2. 2차식 조사법(quadratic probing)
   다음 칸 대신 1부터 순서대로 제곱하여 더한 칸(1^2, 2^2, 3^3...)을 확인하는 방법이다. 테이블의 끝을 넘어간다면 % 연산을 해서 다시 테이블의 버무이 안에 들어오게 한다.

3. 이중 해싱(double hashing)
   hashCode 함수가 2개 있어 채우려는 공간이 이미 차 있다면 두 hashCode의 결과를 더한 값을 테이블 내의 위치가 되게 하는 방법이다. 아예 다른 해시 함수를 사용할 수 있기 때문에 데이터를 더 골고루 넣을 수 있지만, 2개의 해시 함수가 필요하다는 단점이 있다.
